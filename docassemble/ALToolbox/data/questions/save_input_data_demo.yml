---
metadata:
  title: ALToolbox - Save Input Data
---
modules:  
  - .save_input_data
---
id: interview_order
mandatory: true
code: |  
  Survey_intro
  event_rating
  saved_report_data  
  Survey_thank_you
---
id: Survey_intro
continue button field: Survey_intro
question: |
  Event Survey - Save input for data reporting
subquestion: |
  This survey interview shows you how to call a save function to save all the user input in a paricular fashion, so that later on you can use InterviewStats to run data reports on the saved data. 
  
  #### How to implement
  1. If your survey type interview is generated by ALWeaver, 
      - a code block containing everything needed for calling the save function is included automatically;
      - the reference to the save function is handled by AssemblyLine, you don't need to do anything extra.
      - In case you manually changed variable names or variable types later in your plaground, you need to modify the code to match the changes.
  1. If you created your survey type interview outside ALWeaver,
      - copy the code block from this demo and change the variable names, variable types and the title to match your interview;
      - add a module block to reference the save function in ALToolbox.
      
  :bell: What is a _survey type interview_? A survey type interview doesn't give the users anything to download, it only collects answers.
---
id: Screen one
question: |
  Screen one
fields:
  - "How likely is it that you would recommend the event to a friend?": recommendation
    input type: radio
    choices:
      - Not at all likely: 0
      - Maybe not: 1
      - Maybe: 2
      - Somewhat: 3
      - Probably: 4
      - Absolutely: 5
  - "Overall, how would you rate the event?": event_rating
    input type: radio
    choices:
      - Excellent
      - Very good
      - Good
      - Fair
      - Poor
  - "What did you like about the event?": reason_to_like
    input type: area
  - "What did you dislike about the event?": reason_to_dislike
    input type: area
  - "What do you like about the event?": items_to_like
    datatype: checkboxes
    choices:
      - Speakers
      - Topics
      - Location
      - Time
    none of the above: False
---
id: Survey review screen
event: review_Survey
question: |
  Review your answers
review:
  - Edit: recommendation
    button: |
      **How likely is it that you would recommend the event to a friend?**:
      ${ recommendation }
  - Edit: event_rating
    button: |
      **Overall, how would you rate the event?**:
      ${ event_rating }
  - Edit: reason_to_like
    button: |
      **What did you like about the event?**:
      > ${ single_paragraph(reason_to_like) }
  - Edit: items_to_like
    button: |
      **What did you dislike about the event?**:
      > ${ single_paragraph(reason_to_dislike) }
  - Edit: items_to_like
    button: |
      **What do you like about the event?**:
      ${ items_to_like }
---
id: thank you
event: Survey_thank_you
question: | 
  Thank You!
subquestion: |
  Thank you for submitting your answers! We appreciate your time. 
  
  <span style="font-size: 200%">&#128512</span>

progress: 100
---
code: |
  # This block saves input data to a database for reporting purposes. 
  # input_fields_dict's content must match all your variable names and datatypes.
  input_fields_dict = dict()
  input_fields_dict['recommendation'] = recommendation
  input_fields_dict['event_rating'] = event_rating
  input_fields_dict['reason_to_like'] = reason_to_like
  input_fields_dict['reason_to_dislike'] = reason_to_dislike
  input_fields_dict['items_to_like'] = items_to_like

  save_input_data(title='Event Survey', input_dict = input_fields_dict)
  saved_report_data = True