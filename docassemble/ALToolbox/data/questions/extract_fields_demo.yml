---
modules:
  - .llms
---
mandatory: True
code: |
  if demo_type == "from_text":
    initial_answer
  else:
    file_to_extract_from
  try_defining_fields
  ending_screen
---
code: |
  fields_to_extract = [
    'name',
    'age',
    'favorite_color',
    'favorite_food',
    'favorite_animal',
    'favorite_movie'
  ]
  if demo_type == "from_text":
    answers = extract_fields_from_text(
      initial_answer,
      field_list = fields_to_extract,
    )
  else:
    answers = extract_fields_from_file(
      file_to_extract_from,
      field_list = fields_to_extract,
      ocr_images_and_pdfs=ocr_images_and_pdfs
    )
  define_fields_from_dict(answers)
  try_defining_fields = True
---
question: |
  Choose how you want to provide your information
fields:
  - How would you like to provide your information?: demo_type
    datatype: radio
    choices:
      - From a document I upload: from_file
      - By typing it in now: from_text
  - Would you like to use OCR first?: ocr_images_and_pdfs
    datatype: yesnoradio
    show if:
      variable: demo_type
      is: from_file
---
question: |
  Upload a document that tells us about you
subquestion: |
  This is a demonstration of the `extract_fields_from_file` function.

  We are looking for a document that tells us about your:

  * name
  * age
  * favorite_color
  * favorite_food
  * favorite_animal
  * favorite_movie

  Or any subset of this information.
fields:
  - Upload your document here: file_to_extract_from
    datatype: file
---
question: |
  Tell us why you are here
subquestion: |
  This is a demonstration of the `extract_fields_from_text` function.

  We will look through your response and try to define some fields in advance.

  If the fields can be defined, we'll ask some follow-up questions.

  We'll try to define the following fields:

  * Your name
  * Your age
  * Your favorite color
  * Your favorite food
  * Your favorite animal
  * Your favorite movie

  We'll also ask you to tell us a little bit about yourself.
fields:
  - Go ahead and give us a long narrative response: initial_answer
    datatype: area
---
question: |
  How old are you?
fields:
  - Your age: age
    datatype: integer
---
question: |
  What is your name?
fields:
  - Your name: name
---
question: |
  What is your favorite color?
fields:
  - Your favorite color: favorite_color
---
question: |
  What is your favorite food?
fields:
  - Your favorite food: favorite_food
---
question: |
  What is your favorite animal?
fields:
  - Your favorite animal: favorite_animal
---
question: |
  What is your favorite movie?
fields:
  - Your favorite movie: favorite_movie
---
event: ending_screen
question: |
  Here is what we learned about you
subquestion: |
  Your name is ${ name }.

  You are ${ age } years old.

  Your favorite color is ${ favorite_color }.

  Your favorite food is ${ favorite_food }.

  Your favorite animal is ${ favorite_animal }.

  Your favorite movie is ${ favorite_movie }.

  Thanks for participating!